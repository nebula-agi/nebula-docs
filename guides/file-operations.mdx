---
title: 'Memory Operations Guide'
description: 'Learn how to store and search memories in Nebula'
---

# Memory Operations Guide

This guide covers the core memory operations in Nebula: storing memories and searching through them. Nebula provides powerful semantic search capabilities to help you find relevant information across your stored memories.

## Overview

Nebula's memory system allows you to store and retrieve information using semantic search. Memories can be stored individually or in batches, and searched using natural language queries.

### Key Concepts

- **Memories**: Individual pieces of information with content and metadata
- **Clusters**: Logical groupings of memories for organization
- **Semantic Search**: Natural language search across stored memories
- **Metadata**: Additional information attached to memories for filtering and organization

## Storing Memories

### Store Individual Memory

<Tabs>
  <Tab title="Python">
    ```python
    from nebula_client import NebulaClient
    
    client = NebulaClient(api_key="your-api-key")
    
    # Store a memory using dict
    memory_id = client.store_memory({
        "cluster_id": "research-cluster",
        "content": "Machine learning is a subset of artificial intelligence",
        "metadata": {
            "topic": "AI",
            "difficulty": "beginner"
        }
    })
    
    print(f"Memory stored: {memory_id}")
    ```
    
    ```python
    # Or using Memory class
    from nebula_client import Memory
    
    memory = Memory(
        cluster_id="research-cluster",
        content="Machine learning is a subset of artificial intelligence",
        metadata={
            "topic": "AI",
            "difficulty": "beginner"
        }
    )
    memory_id = client.store_memory(memory)
    ```
  </Tab>
  <Tab title="Node.js">
    ```javascript
    const { NebulaSDK } = require('@nebula-ai/sdk');
    
    const client = new NebulaSDK({
      apiKey: 'your-api-key'
    });
    
    // Store a memory
    const memoryId = await client.storeMemory({
      cluster_id: 'research-cluster',
      content: 'Machine learning is a subset of artificial intelligence',
      metadata: {
        topic: 'AI',
        difficulty: 'beginner'
      }
    });
    
    console.log(`Memory stored: ${memoryId}`);
    ```
  </Tab>
</Tabs>

### Store Multiple Memories

<Tabs>
  <Tab title="Python">
    ```python
    from nebula_client import NebulaClient, Memory
    
    client = NebulaClient(api_key="your-api-key")
    
    # Store multiple memories at once
    memories = [
        {
            "cluster_id": "research-cluster",
            "content": "Supervised learning uses labeled training data",
            "metadata": {"type": "definition"}
        },
        {
            "cluster_id": "research-cluster", 
            "content": "Unsupervised learning finds patterns in unlabeled data",
            "metadata": {"type": "definition"}
        },
        {
            "cluster_id": "research-cluster",
            "content": "Neural networks are computing systems inspired by biological brains",
            "metadata": {"type": "concept"}
        }
    ]
    
    memory_ids = client.store_memories(memories)
    print(f"Stored {len(memory_ids)} memories")
    ```
  </Tab>
  <Tab title="Node.js">
    ```javascript
    const { NebulaSDK } = require('@nebula-ai/sdk');
    
    const client = new NebulaSDK({
      apiKey: 'your-api-key'
    });
    
    // Store multiple memories
    const memories = [
      {
        cluster_id: 'research-cluster',
        content: 'Supervised learning uses labeled training data',
        metadata: { type: 'definition' }
      },
      {
        cluster_id: 'research-cluster',
        content: 'Unsupervised learning finds patterns in unlabeled data', 
        metadata: { type: 'definition' }
      },
      {
        cluster_id: 'research-cluster',
        content: 'Neural networks are computing systems inspired by biological brains',
        metadata: { type: 'concept' }
      }
    ];
    
    const memoryIds = await client.storeMemories(memories);
    console.log(`Stored ${memoryIds.length} memories`);
    ```
  </Tab>
</Tabs>

### Store Conversation Messages

<Tabs>
  <Tab title="Python">
    ```python
    from nebula_client import NebulaClient
    
    client = NebulaClient(api_key="your-api-key")
    
    # Store a conversation message
    conversation_id = client.store_memory({
        "cluster_id": "support-cluster",
        "content": "How can I help you today?",
        "role": "assistant",
        "metadata": {
            "session_id": "session_123",
            "timestamp": "2024-01-01T10:00:00Z"
        }
    })
    
    # Continue the conversation
    client.store_memory({
        "cluster_id": "support-cluster", 
        "content": "I need help with my account",
        "role": "user",
        "parent_id": conversation_id,  # Links to previous message
        "metadata": {
            "session_id": "session_123"
        }
    })
    ```
  </Tab>
  <Tab title="Node.js">
    ```javascript
    const { NebulaSDK } = require('@nebula-ai/sdk');
    
    const client = new NebulaSDK({
      apiKey: 'your-api-key'
    });
    
    // Store a conversation message
    const conversationId = await client.storeMemory({
      cluster_id: 'support-cluster',
      content: 'How can I help you today?',
      role: 'assistant',
      metadata: {
        session_id: 'session_123',
        timestamp: '2024-01-01T10:00:00Z'
      }
    });
    
    // Continue the conversation
    await client.storeMemory({
      cluster_id: 'support-cluster',
      content: 'I need help with my account',
      role: 'user', 
      parent_id: conversationId,  // Links to previous message
      metadata: {
        session_id: 'session_123'
      }
    });
    ```
  </Tab>
</Tabs>

## Searching Memories

### Basic Search

<Tabs>
  <Tab title="Python">
    ```python
    from nebula_client import NebulaClient
    
    client = NebulaClient(api_key="your-api-key")
    
    # Search for memories
    results = client.search(
        query="machine learning algorithms",
        cluster_ids=["research-cluster"],
        limit=10
    )
    
    print(f"Found {len(results)} results:")
    for result in results:
        print(f"Score: {result.score:.2f}")
        print(f"Content: {result.content[:100]}...")
        print("---")
    ```
  </Tab>
  <Tab title="Node.js">
    ```javascript
    const { NebulaSDK } = require('@nebula-ai/sdk');
    
    const client = new NebulaSDK({
      apiKey: 'your-api-key'
    });
    
    // Search for memories
    const results = await client.search({
      query: 'machine learning algorithms',
      cluster_ids: ['research-cluster'],
      limit: 10
    });
    
    console.log(`Found ${results.length} results:`);
    results.forEach(result => {
      console.log(`Score: ${result.score.toFixed(2)}`);
      console.log(`Content: ${result.content.substring(0, 100)}...`);
      console.log('---');
    });
    ```
  </Tab>
</Tabs>

### Search with Filters

<Tabs>
  <Tab title="Python">
    ```python
    # Search with metadata filters
    results = client.search(
        query="artificial intelligence",
        cluster_ids=["research-cluster"],
        limit=5,
        filters={
            "metadata.topic": "AI",
            "metadata.difficulty": "beginner"
        }
    )
    
    # Search with score threshold
    results = client.search(
        query="neural networks",
        cluster_ids=["research-cluster"],
        limit=10,
        filters={"score_threshold": 0.7}
    )
    ```
  </Tab>
  <Tab title="Node.js">
    ```javascript
    // Search with metadata filters
    const results = await client.search({
      query: 'artificial intelligence',
      cluster_ids: ['research-cluster'],
      limit: 5,
      filters: {
        'metadata.topic': 'AI',
        'metadata.difficulty': 'beginner'
      }
    });
    
    // Search with score threshold
    const results2 = await client.search({
      query: 'neural networks',
      cluster_ids: ['research-cluster'],
      limit: 10,
      filters: { score_threshold: 0.7 }
    });
    ```
  </Tab>
</Tabs>

## Memory Management

### Retrieve Specific Memory

<Tabs>
  <Tab title="Python">
    ```python
    from nebula_client import NebulaClient
    
    client = NebulaClient(api_key="your-api-key")
    
    # Get a specific memory by ID
    memory = client.get_memory("memory-id-here")
    print(f"Content: {memory.content}")
    print(f"Metadata: {memory.metadata}")
    print(f"Cluster: {memory.cluster_ids}")
    ```
  </Tab>
  <Tab title="Node.js">
    ```javascript
    const { NebulaSDK } = require('@nebula-ai/sdk');
    
    const client = new NebulaSDK({
      apiKey: 'your-api-key'
    });
    
    // Get a specific memory by ID
    const memory = await client.getMemory('memory-id-here');
    console.log(`Content: ${memory.content}`);
    console.log(`Metadata:`, memory.metadata);
    console.log(`Cluster: ${memory.cluster_ids}`);
    ```
  </Tab>
</Tabs>

### List Memories in Cluster

<Tabs>
  <Tab title="Python">
    ```python
    # List memories in a cluster
    memories = client.list_memories(
        cluster_ids=["research-cluster"],
        limit=20,
        offset=0
    )
    
    print(f"Found {len(memories)} memories in cluster:")
    for memory in memories:
        print(f"- {memory.content[:50]}...")
        print(f"  Created: {memory.created_at}")
    ```
  </Tab>
  <Tab title="Node.js">
    ```javascript
    // List memories in a cluster
    const memories = await client.listMemories({
      cluster_ids: ['research-cluster'],
      limit: 20,
      offset: 0
    });
    
    console.log(`Found ${memories.length} memories in cluster:`);
    memories.forEach(memory => {
      console.log(`- ${memory.content.substring(0, 50)}...`);
      console.log(`  Created: ${memory.created_at}`);
    });
    ```
  </Tab>
</Tabs>

### Delete Memory

<Tabs>
  <Tab title="Python">
    ```python
    # Delete a memory
    success = client.delete("memory-id-here")
    if success:
        print("Memory deleted successfully")
    ```
  </Tab>
  <Tab title="Node.js">
    ```javascript
    // Delete a memory
    const success = await client.delete('memory-id-here');
    if (success) {
      console.log('Memory deleted successfully');
    }
    ```
  </Tab>
</Tabs>

## Best Practices

### Memory Organization

1. **Use Descriptive Content**: Store clear, comprehensive information in your memories
2. **Rich Metadata**: Include relevant metadata for better search and filtering
3. **Logical Clusters**: Group related memories into meaningful clusters
4. **Consistent Naming**: Use consistent metadata keys across similar memories

### Search Optimization

- **Natural Language**: Use natural language queries for best results
- **Metadata Filters**: Combine semantic search with metadata filtering
- **Score Thresholds**: Set appropriate score thresholds to filter low-relevance results
- **Limit Results**: Use appropriate limits to manage response size

### Performance Considerations

- **Batch Operations**: Use `store_memories`/`storeMemories` for bulk operations
- **Cluster Targeting**: Search specific clusters when possible
- **Metadata Indexing**: Use metadata filters to reduce search scope
- **Pagination**: Use offset and limit for large result sets

### Error Handling

```python
# Python error handling
try:
    memory_id = client.store_memory(memory_data)
except Exception as e:
    print(f"Error storing memory: {e}")
```

```javascript
// Node.js error handling
try {
  const memoryId = await client.storeMemory(memoryData);
} catch (error) {
  console.error('Error storing memory:', error);
}
```

## Next Steps

- [Clusters Guide](/guides/clusters) - Learn about organizing memories into clusters
- [Conversations Guide](/guides/conversations) - Build conversational AI applications  
- [Error Handling](/guides/error-handling) - Comprehensive error handling patterns
- [API Reference](/api-reference/memories) - Complete memory operations API reference
