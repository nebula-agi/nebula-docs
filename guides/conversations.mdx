---
title: 'Conversations Guide'
description: 'Build chat applications with conversation memories'
---

# Conversations Guide

Build chat applications using conversation memories - containers that hold entire conversations.

## How Conversations Work

Conversations are stored as **conversation memories**. Each conversation has a `memory_id`, and you add messages to that container over time.

- **`role`**: Who said the message (`user`, `assistant`, etc.)
- **`memory_id`**: The conversation container to append to
- **`content`**: Message text (single message or a list of message objects)

<Info>Conversation memories contain the full message history. See [Core Concepts](/guides/concepts) for the memory/chunk model.</Info>

## Creating and Adding Messages

<CodeGroup>

```python Python
from nebula import Nebula
nebula = Nebula(api_key="your-api-key")

# Create conversation with initial message
conv_id = nebula.store_memory({
    "collection_id": "chat-collection",
    "content": "Hello! How can I help?",
    "role": "assistant",
    "metadata": {"conversation_name": "Support Chat"}
})

# Add messages to same conversation
nebula.store_memory({
    "memory_id": conv_id,
    "collection_id": "chat-collection",
    "content": "I need help with my account",
    "role": "user"
})

# Add multiple messages at once
nebula.store_memory({
    "memory_id": conv_id,
    "collection_id": "chat-collection",
    "content": [
        {"content": "What issue are you having?", "role": "assistant"},
        {"content": "I can't log in", "role": "user"}
    ]
})
```

```javascript JavaScript
const { Nebula } = require('@nebula-ai/sdk');
const nebula = new Nebula({ apiKey: 'your-api-key' });

// Create conversation
const convId = await nebula.storeMemory({
  collection_id: "chat-collection",
  content: "Hello! How can I help?",
  role: "assistant",
  metadata: { conversation_name: "Support Chat" }
});

// Add messages to same conversation
await nebula.storeMemory({
  memory_id: convId,
  collection_id: "chat-collection",
  content: "I need help with my account",
  role: "user"
});

// Add multiple messages at once
await nebula.storeMemory({
  memory_id: convId,
  collection_id: "chat-collection",
  content: [
    { content: "What issue are you having?", role: "assistant" },
    { content: "I can't log in", role: "user" }
  ]
});
```

```bash cURL
# Create conversation
curl -X POST "https://api.nebulacloud.app/v1/memories" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -d '{
    "collection_id": "COLLECTION_ID",
    "engram_type": "conversation",
    "messages": [{"content": "Hello! How can I help?", "role": "assistant"}]
  }'

# Add messages (use memory_id from response)
curl -X POST "https://api.nebulacloud.app/v1/memories" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -d '{
    "memory_id": "CONVERSATION_ID",
    "collection_id": "COLLECTION_ID",
    "engram_type": "conversation",
    "messages": [
      {"content": "I need help", "role": "user"},
      {"content": "What issue?", "role": "assistant"}
    ]
  }'
```

</CodeGroup>

## Retrieving Conversations

<CodeGroup>

```python Python
# Get all messages in a conversation
messages = nebula.get_conversation_messages(conv_id)
for msg in messages:
    print(f"[{msg.metadata.get('source_role')}]: {msg.content}")

# List all conversations
conversations = nebula.list_conversations(limit=50)
```

```javascript JavaScript
// Get all messages in a conversation
const messages = await nebula.getConversationMessages(convId);
messages.forEach(msg => console.log(`[${msg.metadata.source_role}]: ${msg.content}`));

// List all conversations
const conversations = await nebula.listConversations({ limit: 50 });
```

```bash cURL
# Get conversation messages
curl -X GET "https://api.nebulacloud.app/v1/conversations/CONVERSATION_ID" \
  -H "Authorization: Bearer YOUR_API_KEY"

# List conversations
curl -X GET "https://api.nebulacloud.app/v1/conversations?limit=50" \
  -H "Authorization: Bearer YOUR_API_KEY"
```

</CodeGroup>

## Best Practices

- **Use descriptive metadata**: Add `conversation_name` and topic information
- **Link messages properly**: Always use `memory_id` to maintain conversation flow
- **Organize by collections**: Group conversations by purpose or project

## Next Steps

- [Core Concepts](/guides/concepts) - Understanding memories and chunks
- [Memory Operations Guide](/guides/memory-operations) - Store and search memories
