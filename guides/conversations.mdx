---
title: 'Conversations Guide'
description: 'Build chat applications with conversation memories'
---

## How Conversations Work

Conversations are stored as **conversation memories**. Each conversation has a `memory_id`, and you add messages to that container over time.

- **`role`**: Who said the message (`user`, `assistant`, etc.)
- **`memory_id`**: The conversation container to append to
- **`content`**: Message text (single message or a list of message objects)

<Info>Conversation memories contain the full message history. See [Core Concepts](/guides/concepts) for the memory/chunk model.</Info>

## Creating and Adding Messages

<CodeGroup>

```python Python
from nebula import Nebula
nebula = Nebula(api_key="your-api-key")

# Get or create your collection
collection = nebula.create_collection(name="Support Chats")

# Create conversation with initial message
conv_id = nebula.store_memory({
    "collection_id": collection.id,
    "content": "Hello! How can I help?",
    "role": "assistant",
    "metadata": {"conversation_name": "Support Chat"}
})

# Add messages to same conversation
nebula.store_memory({
    "memory_id": conv_id,
    "collection_id": collection.id,
    "content": "I need help with my account",
    "role": "user"
})

# Add multiple messages at once
nebula.store_memory({
    "memory_id": conv_id,
    "collection_id": collection.id,
    "content": [
        {"content": "What issue are you having?", "role": "assistant"},
        {"content": "I can't log in", "role": "user"}
    ]
})
```

```javascript JavaScript
const { Nebula } = require('@nebula-ai/sdk');
const nebula = new Nebula({ apiKey: 'your-api-key' });

// Get or create your collection
const collection = await nebula.createCollection({ name: "Support Chats" });

// Create conversation
const convId = await nebula.storeMemory({
  collection_id: collection.id,
  content: "Hello! How can I help?",
  role: "assistant",
  metadata: { conversation_name: "Support Chat" }
});

// Add messages to same conversation
await nebula.storeMemory({
  memory_id: convId,
  collection_id: collection.id,
  content: "I need help with my account",
  role: "user"
});

// Add multiple messages at once
await nebula.storeMemory({
  memory_id: convId,
  collection_id: collection.id,
  content: [
    { content: "What issue are you having?", role: "assistant" },
    { content: "I can't log in", role: "user" }
  ]
});
```

```bash cURL
# Create conversation
curl -X POST "https://api.trynebula.ai/v1/memories" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -d '{
    "collection_id": "COLLECTION_ID",
    "engram_type": "conversation",
    "messages": [{"content": "Hello! How can I help?", "role": "assistant"}]
  }'

# Append messages (use the id from the create response)
curl -X POST "https://api.trynebula.ai/v1/memories/CONVERSATION_ID/append" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -d '{
    "collection_id": "COLLECTION_ID",
    "messages": [
      {"content": "I need help", "role": "user"},
      {"content": "What issue?", "role": "assistant"}
    ]
  }'
```

</CodeGroup>

## Retrieving Conversations

Use `list_memories()` to retrieve conversations with message roles, or `get_memory()` for a single conversation's metadata.

<CodeGroup>

```python Python
# List conversations in a collection (includes message roles)
conversations = nebula.list_memories(
    collection_ids=[collection.id]
)
for conv in conversations:
    for chunk in conv.chunks or []:
        print(f"[{chunk.role}]: {chunk.content}")

# Get a single conversation's metadata
memory = nebula.get_memory(conv_id)
```

```javascript JavaScript
// List conversations in a collection (includes message roles)
const conversations = await nebula.listMemories({
  collection_ids: [collection.id]
});
conversations.forEach(conv =>
  conv.chunks?.forEach(chunk =>
    console.log(`[${chunk.role}]: ${chunk.content}`)
  )
);

// Get a single conversation's metadata
const memory = await nebula.getMemory(convId);
```

```bash cURL
# List memories in a collection
curl -G "https://api.trynebula.ai/v1/memories" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  --data-urlencode 'collection_ids=COLLECTION_ID'

# Get a single conversation
curl -X GET "https://api.trynebula.ai/v1/memories/CONVERSATION_ID" \
  -H "Authorization: Bearer YOUR_API_KEY"
```

</CodeGroup>

## Next Steps

- [Core Concepts](/guides/concepts) - Understanding memories and chunks
- [Memory Operations](/guides/memory-operations) - Store and search memories
