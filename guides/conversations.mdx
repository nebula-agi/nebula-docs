---
title: 'Conversations Guide'
description: 'Build chat applications with conversation memories'
---

## How Conversations Work

Conversations are stored as **conversation memories**. Each conversation has a `memory_id`, and you add messages to that container over time.

- **`role`**: Who said the message (`user`, `assistant`, etc.)
- **`memory_id`**: The conversation container to append to
- **`content`**: Message text (single message or a list of message objects)

<Info>Conversation memories contain the full message history. See [Core Concepts](/guides/concepts) for the memory/chunk model.</Info>

## Creating and Adding Messages

<CodeGroup>

```python Python
from nebula import Nebula
nebula = Nebula(api_key="your-api-key")

# Create conversation with initial message
conv_id = nebula.store_memory({
    "collection_id": "chat-collection",
    "content": "Hello! How can I help?",
    "role": "assistant",
    "metadata": {"conversation_name": "Support Chat"}
})

# Add messages to same conversation
nebula.store_memory({
    "memory_id": conv_id,
    "collection_id": "chat-collection",
    "content": "I need help with my account",
    "role": "user"
})

# Add multiple messages at once
nebula.store_memory({
    "memory_id": conv_id,
    "collection_id": "chat-collection",
    "content": [
        {"content": "What issue are you having?", "role": "assistant"},
        {"content": "I can't log in", "role": "user"}
    ]
})
```

```javascript JavaScript
const { Nebula } = require('@nebula-ai/sdk');
const nebula = new Nebula({ apiKey: 'your-api-key' });

// Create conversation
const convId = await nebula.storeMemory({
  collection_id: "chat-collection",
  content: "Hello! How can I help?",
  role: "assistant",
  metadata: { conversation_name: "Support Chat" }
});

// Add messages to same conversation
await nebula.storeMemory({
  memory_id: convId,
  collection_id: "chat-collection",
  content: "I need help with my account",
  role: "user"
});

// Add multiple messages at once
await nebula.storeMemory({
  memory_id: convId,
  collection_id: "chat-collection",
  content: [
    { content: "What issue are you having?", role: "assistant" },
    { content: "I can't log in", role: "user" }
  ]
});
```

```bash cURL
# Create conversation
curl -X POST "https://api.trynebula.ai/v1/memories" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -d '{
    "collection_id": "COLLECTION_ID",
    "engram_type": "conversation",
    "messages": [{"content": "Hello! How can I help?", "role": "assistant"}]
  }'

# Add messages (use memory_id from response)
curl -X POST "https://api.trynebula.ai/v1/memories" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -d '{
    "memory_id": "CONVERSATION_ID",
    "collection_id": "COLLECTION_ID",
    "engram_type": "conversation",
    "messages": [
      {"content": "I need help", "role": "user"},
      {"content": "What issue?", "role": "assistant"}
    ]
  }'
```

</CodeGroup>

## Retrieving Conversations

Use `get_memory()` to retrieve a conversation with all its messages as chunks.

<CodeGroup>

```python Python
# Get conversation with all messages
memory = nebula.get_memory(conv_id)
for chunk in memory.chunks:
    print(f"[{chunk.metadata.get('source_role')}]: {chunk.content}")

# List conversation memories in a collection
conversations = nebula.list_memories(
    collection_ids=["chat-collection"],
    metadata_filters={"metadata.type": {"$eq": "conversation"}}
)
```

```javascript JavaScript
// Get conversation with all messages
const memory = await nebula.getMemory(convId);
memory.chunks?.forEach(chunk =>
  console.log(`[${chunk.metadata?.source_role}]: ${chunk.content}`)
);

// List conversation memories in a collection
const conversations = await nebula.listMemories({
  collection_ids: ["chat-collection"],
  metadata_filters: {"metadata.type": {"$eq": "conversation"}}
});
```

```bash cURL
# Get conversation with messages
curl -X GET "https://api.trynebula.ai/v1/memories/CONVERSATION_ID" \
  -H "Authorization: Bearer YOUR_API_KEY"

# List memories (filter by conversation type)
curl -G "https://api.trynebula.ai/v1/memories" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  --data-urlencode 'collection_ids=COLLECTION_ID' \
  --data-urlencode 'metadata_filters={"metadata.type":{"$eq":"conversation"}}'
```

</CodeGroup>

<Tip>Add descriptive metadata like `conversation_name` for organization. Always use `memory_id` to maintain conversation flow, and group conversations by purpose using [collections](/guides/collections).</Tip>

## Next Steps

- [Core Concepts](/guides/concepts) - Understanding memories and chunks
- [Memory Operations](/guides/memory-operations) - Store and search memories
