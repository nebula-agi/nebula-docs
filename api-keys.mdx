---
title: 'API Keys'
description: 'Manage API keys with granular permissions for the Nebula API'
---

# API Keys

API keys are the primary authentication method for the Nebula API. They provide granular permissions and are scoped to specific clusters, making them ideal for both development and production use.

## Overview

API keys in Nebula provide:

- **Granular Permissions**: Control access at the cluster level
- **Multiple Permission Levels**: Read, write, admin, or no access
- **Easy Management**: Create, update, and revoke keys programmatically
- **Security**: Secure key generation and storage

## Creating API Keys

### Via Dashboard

1. Log in to your [Nebula dashboard](https://nebulacloud.app)
2. Navigate to **Settings** → **API Keys**
3. Click **Create New API Key**
4. Configure the following:
   - **Name**: A descriptive name for the key
   - **Description**: Optional description of the key's purpose
   - **Clusters**: Select clusters and set permissions
5. Click **Create Key**
6. **Important**: Copy the generated API key immediately (it won't be shown again)

### Via API

You can create API keys programmatically using the API:

```bash
curl -X POST https://api.nebulacloud.app/users/{USER_ID}/api-keys \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Production API Key",
    "description": "For production application"
  }'
```

### Response

```json
{
  "id": "key_uuid_123",
  "name": "Production API Key",
  "description": "For production application",
  "key": "neb_abcdef123456789",
  "active": true,
  "created_at": "2024-01-15T10:30:00Z",
  "user_id": "user-uuid-123"
}
```

## Permission Levels

API keys support four permission levels:

| Permission | Description | Capabilities |
|------------|-------------|--------------|
| `read` | Read-only access | View files, download files, list folders |
| `write` | Read and write access | All read permissions + upload, create folders, delete, move, rename |
| `admin` | Full access | All write permissions + manage cluster settings |
| `none` | No access | Cannot access the cluster |

### Permission Hierarchy

```
admin > write > read > none
```

Each permission level includes all permissions from the levels below it.

## Managing API Keys

### List User API Keys

```bash
curl -H "Authorization: Bearer YOUR_JWT_TOKEN" \
     https://api.nebulacloud.app/users/{USER_ID}/api-keys
```

### Delete API Key

```bash
curl -X DELETE https://api.nebulacloud.app/users/{USER_ID}/api-keys/{KEY_ID} \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

## Using API Keys

### In Client Libraries

<Tabs>
  <Tab title="Python">
    ```python
    from nebula_client import NebulaClient

    # Initialize with API key
    client = NebulaClient(api_key="neb_abcdef123456789")
    
    # Test the connection
    try:
        health = client.system.health()
        print("API key is valid")
    except Exception as e:
        print(f"API key error: {e}")
    ```
  </Tab>
  <Tab title="Node.js">
    ```javascript
    const { NebulaSDK } = require('@nebula-ai/sdk');
    
    // Initialize with API key
    const client = new NebulaSDK({
      apiKey: 'neb_abcdef123456789'
    });
    
    // Test the connection
    try {
        const health = await client.system.health();
        console.log('API key is valid');
    } catch (error) {
        console.error('API key error:', error);
    }
    ```
  </Tab>
  <Tab title="Go">
    ```go
    import "github.com/oronila/nebula-client-go/nebulaclient"
    
    // Initialize with API key
    client := nebulaclient.NewClient("neb_abcdef123456789")
    
    // Test the connection
    health, err := client.SystemHealth()
    if err != nil {
        log.Fatalf("API key error: %v", err)
    }
    fmt.Println("API key is valid")
    ```
  </Tab>
</Tabs>

### Direct API Calls

```bash
# List files in a cluster
curl -H "Authorization: ApiKey neb_abcdef123456789" \
     https://api.nebulacloud.app/clusters/your-cluster-id/files/list

# Upload a file
curl -X POST https://api.nebulacloud.app/clusters/your-cluster-id/files/upload-url \
  -H "Authorization: ApiKey neb_abcdef123456789" \
  -H "Content-Type: application/json" \
  -d '{
    "fileName": "example.txt",
    "folderId": "ROOT"
  }'
```

## Best Practices

### Security

1. **Never commit API keys to version control**
   ```bash
   # Add to .gitignore
   echo "*.env" >> .gitignore
   echo "secrets/" >> .gitignore
   ```

2. **Use environment variables**
   ```bash
   # .env file
   NEBULA_API_KEY=neb_abcdef123456789
   NEBULA_CLUSTER_ID=your-cluster-id
   ```

3. **Rotate keys regularly**
   - Set up a schedule to rotate API keys (e.g., every 90 days)
   - Use different keys for different environments (dev, staging, prod)

4. **Monitor key usage**
   - Regularly check which keys are being used
   - Revoke unused or compromised keys immediately

### Organization

1. **Use descriptive names**
   ```
   ✅ Good: "Production Web App - Read Only"
   ❌ Bad: "key1"
   ```

2. **Group by environment**
   ```
   Production API Key - Admin
   Staging API Key - Write
   Development API Key - Read
   ```

3. **Document key purposes**
   - Always add descriptions to your API keys
   - Include the application or service using the key

### Permissions

1. **Follow the principle of least privilege**
   - Start with read-only permissions
   - Only grant additional permissions when needed

2. **Use different keys for different purposes**
   ```
   Web App - Read/Write (for user uploads)
   Backup Service - Read Only (for backups)
   Admin Tool - Admin (for management)
   ```

3. **Regularly audit permissions**
   - Review key permissions monthly
   - Remove unnecessary permissions

## Common Use Cases

### Development Environment

```bash
# Create a development key with read-only access
curl -X POST https://api.nebulacloud.app/users/{USER_ID}/api-keys \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Development Environment",
    "description": "For local development and testing"
  }'
```

### Production Application

```bash
# Create a production key with write access
curl -X POST https://api.nebulacloud.app/users/{USER_ID}/api-keys \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Production Web App",
    "description": "For production web application"
  }'
```

### Admin Access

```bash
# Create an admin key for management tasks
curl -X POST https://api.nebulacloud.app/users/{USER_ID}/api-keys \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Admin Management",
    "description": "For administrative tasks and cluster management"
  }'
```

## Troubleshooting

### Common Issues

#### Invalid API Key

```json
{
  "error": "Unauthorized",
  "message": "Invalid API key",
  "statusCode": 401
}
```

**Solution**: Check that the API key is correct and active.

#### Insufficient Permissions

```json
{
  "error": "Forbidden",
  "message": "Insufficient permissions for this operation",
  "statusCode": 403
}
```

**Solution**: Check the API key's permissions for the specific cluster.

#### Cluster Not Found

```json
{
  "error": "Not Found",
  "message": "Cluster not found",
  "statusCode": 404
}
```

**Solution**: Verify the cluster ID and ensure the API key has access to it.

### Testing API Keys

```bash
# Test API key validity
curl -H "Authorization: ApiKey YOUR_API_KEY" \
     https://api.nebulacloud.app/system/health

# Test cluster access
curl -H "Authorization: ApiKey YOUR_API_KEY" \
     https://api.nebulacloud.app/clusters/YOUR_CLUSTER_ID/files/list
```

## Next Steps

- [Authentication](/authentication) - Learn about authentication methods
- [Memory Operations](/guides/memory-operations) - Start working with memories
- [Error Handling](/guides/error-handling) - Handle API errors properly
- [API Reference](/api-reference/overview) - Explore all endpoints 