---
title: 'Python Client'
description: 'Official Python client library for the Nebula Memory API'
---

# Python Client

The official Python client library for the Nebula Memory API provides a simple and intuitive interface for storing, retrieving, and searching memories with advanced clustering capabilities.


## Installation & Setup

**Install:**
```bash
pip install nebula-client
```

**Environment setup:**
```bash
export NEBULA_API_KEY="your_api_key_here"
```

## Client Initialization

**Basic usage:**
```python
from nebula_client import NebulaClient

# Using environment variable
client = NebulaClient()

# Or with explicit API key
client = NebulaClient(api_key="your_api_key_here")
```

**Advanced configuration:**
```python
client = NebulaClient(
    api_key="your_api_key_here",
    base_url="https://api.nebulacloud.app",  # Default
    timeout=30.0  # Default timeout in seconds
)
```

## Cluster Management

**Create cluster:**
```python
cluster = client.create_cluster(
    name="research_notes",
    description="Cluster for research-related memories",
    metadata={"category": "academic", "priority": "high"}
)
```

**Get cluster:**
```python
cluster = client.get_cluster("cluster_id_here")
```

**List clusters:**
```python
clusters = client.list_clusters(limit=100, offset=0)
```

**Update cluster:**
```python
updated_cluster = client.update_cluster(
    cluster_id="cluster_id_here",
    name="new_name",  # Optional
    description="new_description",  # Optional
    metadata={"updated": True}  # Optional
)
```

**Delete cluster:**
```python
success = client.delete_cluster("cluster_id_here")
```

## Memory Storage

**Store memory:**
```python
# Using dict (recommended)
memory_id = client.store_memory({
    "cluster_id": "user_preferences",
    "content": "User prefers email communication over phone calls",
    "metadata": {
        "user_id": "user_123",
        "preference_type": "communication",
        "importance": "high"
    }
})

# Using Memory class
from nebula_client import Memory
memory = Memory(
    cluster_id="user_preferences",
    content="User prefers email communication over phone calls",
    metadata={"user_id": "user_123"}
)
memory_id = client.store_memory(memory)
```

## Memory Retrieval

**Get specific memory:**
```python
memory = client.get_memory("memory_id_here")
```

**List memories:**
```python
memories = client.list_memories(
    cluster_ids=["cluster_123"],  # Required - list of cluster IDs
    limit=100,      # Default: 100
    offset=0        # Default: 0
)
```


## Search Operations

**Basic search:**
```python
results = client.search(
    query="artificial intelligence",
    cluster_ids=["research_cluster"],     # Required - list of cluster IDs
    limit=10                              # Optional - default: 10
)
```

**Advanced search with filters:**
```python
results = client.search(
    query="machine learning research",
    cluster_ids=["research_cluster"],
    limit=15,
    search_settings={
        "search_mode": "super",           # 'fast' or 'super' (default: 'super')
        "filters": {"metadata.topic": "ai"},
        "semantic_weight": 7.0,           # Emphasize conceptual matching
        "fulltext_weight": 3.0,           # Some keyword matching
    }
)
```

**Search modes:**
```python
# Fast mode: Fast BFS graph traversal (max_depth=3, simple scoring)
results = client.search(
    query="quick search",
    cluster_ids=["cluster_id"],
    search_settings={"search_mode": "fast"}
)

# Super mode: SuperBFS with set transformers (max_depth=50, contextualized scoring)
results = client.search(
    query="complex query",
    cluster_ids=["cluster_id"],
    search_settings={"search_mode": "super"}  # Default
)
```

**Search with source role filtering:**
```python
# Filter by conversation roles using canonical filter keys
results = client.search(
    query="user feedback",
    cluster_ids=["support_cluster"],
    search_settings={
        "filters": {
            "source_role": "user",        # Special filter key for graph search
            "metadata.category": "feedback"
        }
    }
)
```

## Memory Management

**Delete single memory:**
```python
success = client.delete("memory_id_here")
print(f"Deleted: {success}")  # True
```

**Delete multiple memories (batch):**
```python
# Delete multiple memories in a single operation
memory_ids = ["mem_id_1", "mem_id_2", "mem_id_3"]
result = client.delete(memory_ids)

# Access detailed results
print(f"Message: {result['message']}")
print(f"Deleted: {result['results']['successful']}")
print(f"Failed: {result['results']['failed']}")
print(f"Summary: {result['results']['summary']}")

# Example response:
# {
#   "message": "Deleted 2 of 3 documents",
#   "results": {
#     "successful": ["mem_id_1", "mem_id_2"],
#     "failed": [{"id": "mem_id_3", "error": "Not found or no permission"}],
#     "summary": {"total": 3, "succeeded": 2, "failed": 1}
#   }
# }
```

## Data Models

**Memory class (for writing):**
```python
from nebula_client import Memory

# Memory class structure
memory = Memory(
    cluster_id="user_preferences",  # Required: cluster to store in
    content="User prefers email communication",  # Required: text content
    role="user",  # Optional: 'user', 'assistant', or custom (for conversations)
    parent_id="conv_123",  # Optional: conversation ID (for conversations)
    metadata={"user_id": "user_123"}  # Optional: additional metadata
)
```

**MemoryResponse class (for reading):**
```python
# Returned by get_memory(), list_memories(), etc.
class MemoryResponse:
    id: str                    # Memory/document ID
    content: str              # Memory content (retrieved from chunks)
    metadata: dict            # Additional metadata
    cluster_ids: List[str]    # Associated clusters
    created_at: str           # Creation timestamp
    updated_at: str           # Last update timestamp
```

## Error Handling

**Exception types:**
```python
from nebula_client.exceptions import (
    NebulaException,              # Base exception
    NebulaClientException,        # Client-side errors
    NebulaAuthenticationException, # Authentication errors
    NebulaRateLimitException,     # Rate limiting errors
    NebulaValidationException     # Validation errors
)
```

**Error handling:**
```python
try:
    memory = client.store_memory({
        "content": "Test memory",
        "cluster_id": "test_cluster"
    })
except NebulaAuthenticationException:
    print("Invalid API key")
except NebulaRateLimitException:
    print("Rate limit exceeded")
except NebulaValidationException as e:
    print(f"Validation error: {e}")
except NebulaException as e:
    print(f"API error: {e}")
```

## Quick Example

```python
from nebula_client import NebulaClient

# Initialize
client = NebulaClient(api_key="your_api_key")

# Create cluster and store memory
cluster = client.create_cluster("my_cluster", "Example cluster")
memory_id = client.store_memory({
    "cluster_id": cluster.id,
    "content": "Hello world",
    "metadata": {"test": True}
})

# Search
results = client.search("hello", cluster_ids=[cluster.id])
```

## Next Steps

- [Memory Operations Guide](/guides/memory-operations) - Detailed examples
- [API Reference](/api-reference/overview) - Full endpoint documentation 