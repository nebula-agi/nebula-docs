---
title: 'Collections API Reference'
description: 'Complete API reference for collections operations in Nebula'
---

# Collections API Reference

This page provides detailed information about all collections-related API endpoints in Nebula.

## Base URL

All API endpoints are relative to: `https://api.nebulacloud.app`

## Authentication

All requests require authentication using either:
- **API Key**: `Authorization: ApiKey your-api-key`
- **JWT Token**: `Authorization: Bearer your-jwt-token`

## Collections Operations

### List Collections

Retrieve a list of collections.

```http
GET /api/v1/collections
```

**Parameters:**
- `limit` (integer, optional): Number of collections to return. Defaults to 50
- `offset` (integer, optional): Number of collections to skip. Defaults to 0

**Response:**
```json
{
  "collections": [
    {
      "id": "collection-uuid",
      "name": "Research Papers",
      "description": "Collection of academic research papers",
      "created_at": "2024-01-01T00:00:00Z",
      "updated_at": "2024-01-01T00:00:00Z",
      "document_count": 25,
      "metadata": {
        "category": "academic",
        "language": "en"
      }
    }
  ],
  "total": 100,
  "limit": 50,
  "offset": 0
}
```

### Create Collection

Create a new collection.

```http
POST /api/v1/collections
```

**Request Body:**
```json
{
  "name": "New Collection",
  "description": "Description of the collection",
  "metadata": {
    "category": "research",
    "language": "en"
  }
}
```

**Response:**
```json
{
  "id": "collection-uuid",
  "name": "New Collection",
  "description": "Description of the collection",
  "created_at": "2024-01-01T00:00:00Z",
  "updated_at": "2024-01-01T00:00:00Z",
  "document_count": 0,
  "metadata": {
    "category": "research",
    "language": "en"
  }
}
```

### Get Collection

Retrieve collection details and documents.

```http
GET /api/v1/collections/{collection_id}
```

**Parameters:**
- `collection_id` (string, required): The ID of the collection

**Response:**
```json
{
  "id": "collection-uuid",
  "name": "Research Papers",
  "description": "Collection of academic research papers",
  "created_at": "2024-01-01T00:00:00Z",
  "updated_at": "2024-01-01T00:00:00Z",
  "document_count": 25,
  "metadata": {
    "category": "academic",
    "language": "en"
  },
  "documents": [
    {
      "id": "document-uuid",
      "name": "research-paper.pdf",
      "size": 2048000,
      "content_type": "application/pdf",
      "created_at": "2024-01-01T00:00:00Z",
      "entities": [
        {
          "type": "person",
          "value": "John Doe",
          "confidence": 0.95
        }
      ]
    }
  ]
}
```

### Update Collection

Update collection metadata.

```http
PUT /api/v1/collections/{collection_id}
```

**Parameters:**
- `collection_id` (string, required): The ID of the collection

**Request Body:**
```json
{
  "name": "Updated Collection Name",
  "description": "Updated description",
  "metadata": {
    "category": "updated-category",
    "language": "en"
  }
}
```

**Response:**
```json
{
  "id": "collection-uuid",
  "name": "Updated Collection Name",
  "description": "Updated description",
  "updated_at": "2024-01-01T00:00:00Z",
  "metadata": {
    "category": "updated-category",
    "language": "en"
  }
}
```

### Delete Collection

Delete a collection and all its documents.

```http
DELETE /api/v1/collections/{collection_id}
```

**Parameters:**
- `collection_id` (string, required): The ID of the collection

**Response:**
```json
{
  "success": true,
  "message": "Collection deleted successfully",
  "deleted_documents": 25
}
```

### Add Document to Collection

Add a document to a collection.

```http
POST /api/v1/collections/{collection_id}/documents
```

**Parameters:**
- `collection_id` (string, required): The ID of the collection

**Request Body:**
```json
{
  "document_id": "document-uuid"
}
```

**Response:**
```json
{
  "success": true,
  "message": "Document added to collection",
  "collection_id": "collection-uuid",
  "document_id": "document-uuid"
}
```

### Remove Document from Collection

Remove a document from a collection.

```http
DELETE /api/v1/collections/{collection_id}/documents/{document_id}
```

**Parameters:**
- `collection_id` (string, required): The ID of the collection
- `document_id` (string, required): The ID of the document

**Response:**
```json
{
  "success": true,
  "message": "Document removed from collection"
}
```

### Search Collections

Search collections by name, description, or metadata.

```http
GET /api/v1/collections/search
```

**Parameters:**
- `query` (string, required): Search query
- `limit` (integer, optional): Number of results to return. Defaults to 50
- `offset` (integer, optional): Number of results to skip. Defaults to 0

**Response:**
```json
{
  "results": [
    {
      "id": "collection-uuid",
      "name": "Research Papers",
      "description": "Collection of academic research papers",
      "score": 0.95,
      "document_count": 25
    }
  ],
  "total": 10,
  "limit": 50,
  "offset": 0
}
```

## Error Responses

### 400 Bad Request
```json
{
  "error": "Invalid request parameters",
  "details": "Collection name cannot be empty"
}
```

### 401 Unauthorized
```json
{
  "error": "Authentication required",
  "message": "Valid API key or JWT token required"
}
```

### 403 Forbidden
```json
{
  "error": "Insufficient permissions",
  "message": "You don't have permission to access this resource"
}
```

### 404 Not Found
```json
{
  "error": "Collection not found",
  "message": "The specified collection does not exist"
}
```

### 409 Conflict
```json
{
  "error": "Collection already exists",
  "message": "A collection with this name already exists"
}
```

## Rate Limits

- **Create/Delete**: 20 requests per minute per API key
- **List/Get**: 500 requests per minute per API key
- **Update**: 100 requests per minute per API key
- **Search**: 200 requests per minute per API key

## Collection Metadata

Collections support custom metadata for organization and filtering:

- **Maximum metadata size**: 1KB per collection
- **Supported types**: String, number, boolean, array
- **Reserved keys**: `id`, `name`, `description`, `created_at`, `updated_at`
- **Case sensitivity**: Metadata keys are case-sensitive 