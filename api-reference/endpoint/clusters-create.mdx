---
title: Create Cluster
path: /clusters/create
---

Create a new cluster within a project. Requires authentication and a unique cluster name within the project.

## Endpoint

`POST /clusters/create`

## Description
Creates a new cluster in the authenticated user's project. The cluster name must be unique within the project. Returns the created cluster's details on success.

## Request

**Headers:**
- `Authorization: Bearer <token>` or `Authorization: ApiKey <api_key>`

**Body:**
```json
{
  "name": "string",         // Required. Unique cluster name within the project.
  "description": "string"   // Optional. Description of the cluster.
}
```

## Example cURL

```bash
curl -X POST https://api.nebulacloud.app/clusters/create \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "my-cluster",
    "description": "A test cluster"
  }'
```

## Success Response

**Status:** `200 OK`

```json
{
  "message": "Cluster created and allocated successfully",
  "cluster": {
    "id": "uuid",
    "name": "my-cluster",
    "description": "A test cluster",
    "project_id": "uuid",
    "user_id": "uuid",
    "status": "allocating"
  }
}
```

## Error Responses

| Status | Description | Example |
|--------|-------------|---------|
| 400    | Missing project_id or invalid request | `{ "detail": "project_id required for non-api-key users" }` |
| 409    | Duplicate cluster name | `{ "detail": "A cluster with this name already exists in the project." }` |
| 500    | Internal error | `{ "detail": "Failed to create cluster record." }` or `{ "detail": "Failed to create S3 folder: ..." }` |
| 403    | Quota exceeded or plan restriction | `{ "detail": "..." }` |

--- 